type: spec.insomnia.rest/5.0
name: Flights Service 0.1.0
meta:
  id: wrk_0fc4bf79958c42b1842f4a4cd296bb9d
  created: 1746183695814
  modified: 1746213099748
collection:
  - name: flight-data
    meta:
      id: fld_3120712e0c414954b8ecf5a824620c72
      created: 1746183963157
      modified: 1746183963157
      sortKey: -1746183963157
    children:
      - url: "{{ _.base_url }}/health"
        name: Health check endpoint for Kubernetes
        meta:
          id: req_bfbdda0dfe0a4cfe93e1304881b192cf
          created: 1746183963158
          modified: 1746183963158
          isPrivate: false
          description: Endpoint that returns the service health status.
          sortKey: -1746183963158
        method: GET
        authentication:
          type: basic
          username: "{{ _.httpUsername }}"
          password: "{{ _.httpPassword }}"
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.base_url }}/flights"
        name: Get KongAir planned flights
        meta:
          id: req_e16391b3f8cd42f68104b7f1f381f627
          created: 1746183963158
          modified: 1746183963158
          isPrivate: false
          description: |
            Returns all the scheduled flights for a given day
          sortKey: -1746183963158
        method: GET
        parameters:
          - name: date
            disabled: true
            value: string
        authentication:
          type: basic
          username: "{{ _.httpUsername }}"
          password: "{{ _.httpPassword }}"
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.base_url }}/flights/{{ _.flightNumber }}"
        name: Get a specific flight by flight number
        meta:
          id: req_5195952fce0c4a1ab02cabb393e1cbb4
          created: 1746183963159
          modified: 1746183963159
          isPrivate: false
          description: |
            Returns a specific flight given its flight number
          sortKey: -1746183963159
        method: GET
        authentication:
          type: basic
          username: "{{ _.httpUsername }}"
          password: "{{ _.httpPassword }}"
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.base_url }}/flights/{{ _.flightNumber }}/details"
        name: Fetch more details about a flight
        meta:
          id: req_d2769cedfae74c059cdbfe9de40b24f2
          created: 1746183963159
          modified: 1746184161077
          isPrivate: false
          description: Fetch more details about a flight
          sortKey: -1746183963159
        method: GET
        authentication:
          type: basic
          username: "{{ _.httpUsername }}"
          password: "{{ _.httpPassword }}"
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
cookieJar:
  name: Default Jar
  meta:
    id: jar_532c109ed30791b1c5a09f9f866a1aec09f029c2
    created: 1746183701315
    modified: 1746183701315
environments:
  name: Base Environment
  meta:
    id: env_532c109ed30791b1c5a09f9f866a1aec09f029c2
    created: 1746183701219
    modified: 1746183963154
    isPrivate: false
  data:
    base_url: "{{ _.scheme }}://{{ _.host }}{{ _.base_path }}"
  subEnvironments:
    - name: OpenAPI env api.kong-air.com
      meta:
        id: env_50c908779e7e4891975489734a789207
        created: 1746183963156
        modified: 1746183963156
        isPrivate: false
        sortKey: 1746183963156
      data:
        scheme: https
        host: api.kong-air.com
        httpUsername: username
        httpPassword: password
    - name: local
      meta:
        id: env_bc58d0e61f594c1fad88c45861b9080e
        created: 1746191610680
        modified: 1746212594447
        isPrivate: false
        sortKey: 1746191610680
      data:
        scheme: http
        host: localhost:8081
        base_path: ""
        httpUsername: username
        httpPassword: password
        flightNumber: KA0284
spec:
  contents:
    openapi: 3.1.0
    info:
      description: KongAir Flights service provides the scheduled flights for KongAir
      version: 0.1.0
      contact:
        email: kongair-team@kongair.com
      title: Flights Service
    servers:
      - url: https://api.kong-air.com
        description: KongAir API Server
    components:
      securitySchemes:
        BasicAuth:
          type: http
          scheme: basic
      schemas:
        Flight:
          type: object
          properties:
            number:
              type: string
            route_id:
              type: string
            scheduled_departure:
              type: string
              format: date-time
            scheduled_arrival:
              type: string
              format: date-time
          required:
            - number
            - route_id
            - scheduled_departure
            - scheduled_arrival
        FlightDetails:
          type: object
          properties:
            flight_number:
              type: string
            in_flight_entertainment:
              type: boolean
            meal_options:
              type: array
              items:
                type: string
            aircraft_type:
              type: string
          required:
            - flight_number
            - in_flight_entertainment
            - meal_options
            - aircraft_type
    tags:
      - name: flight-data
    paths:
      /health:
        get:
          tags:
            - flight-data
          operationId: health
          summary: Health check endpoint for Kubernetes
          description: Endpoint that returns the service health status.
          responses:
            "200":
              description: Service is healthy
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        example: OK
              headers:
                hostname:
                  description: The hostname of the machine fulfilling the request.
                  schema:
                    type: string
            "401":
              description: Unauthorized
            "500":
              description: Service is unhealthy
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      status:
                        type: string
                        example: unhealthy
      /flights:
        get:
          summary: Get KongAir planned flights
          description: |
            Returns all the scheduled flights for a given day
          tags:
            - flight-data
          operationId: get-flights
          parameters:
            - name: date
              in: query
              description: Filter by date (defaults to current day)
              required: false
              style: form
              schema:
                type: string
                format: date
          responses:
            "200":
              description: Successful response with scheduled flights
              headers:
                hostname:
                  description: The hostname of the machine fulfilling the request.
                  schema:
                    type: string
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: "#/components/schemas/Flight"
                  examples:
                    Example Flights List:
                      value:
                        - number: KD924
                          route_id: LHR-SFO
                          scheduled_departure: 2024-03-20T09:12:28Z
                          scheduled_arrival: 2024-03-20T19:12:28Z
                        - number: KD925
                          route_id: SFO-LHR
                          scheduled_departure: 2024-03-21T09:12:28Z
                          scheduled_arrival: 2024-03-21T19:12:28Z
            "401":
              description: Unauthorized
      "/flights/{flightNumber}":
        get:
          summary: Get a specific flight by flight number
          description: |
            Returns a specific flight given its flight number
          tags:
            - flight-data
          operationId: get-flight-by-number
          parameters:
            - name: flightNumber
              in: path
              description: The flight number (only alphanumeric characters allowed)
              required: true
              style: simple
              schema:
                type: string
                pattern: ^[a-zA-Z0-9]+$
                example: KA0284
          responses:
            "200":
              description: Successful response with the requested flight
              headers:
                hostname:
                  description: The hostname of the machine fulfilling the request.
                  schema:
                    type: string
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/Flight"
                  examples:
                    Example Flight KD924:
                      value:
                        number: KD924
                        route_id: LHR-SFO
                        scheduled_departure: 2024-03-20T09:12:28Z
                        scheduled_arrival: 2024-03-20T19:12:28Z
            "401":
              description: Unauthorized
            "404":
              description: Flight not found
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
      "/flights/{flightNumber}/details":
        get:
          summary: Fetch more details about a flight
          description: Fetch more details about a flight
          tags:
            - flight-data
          operationId: get-flight-details
          parameters:
            - name: flightNumber
              in: path
              description: The flight number
              required: true
              style: simple
              schema:
                type: string
                pattern: ^[a-zA-Z0-9]+$
                example: KA0293
          responses:
            "200":
              description: Successful response with the requested flight details
              headers:
                hostname:
                  description: The hostname of the machine fulfilling the request.
                  schema:
                    type: string
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/FlightDetails"
            "400":
              description: Invalid flight number
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Invalid format for parameter
                text/plain:
                  schema:
                    type: string
            "401":
              description: Unauthorized
            "404":
              description: Flight not found
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
  meta:
    id: spc_7ec41358b377469190e0f1edcdc3741c
    created: 1746183695819
    modified: 1746213099746
testSuites:
  - name: New Suite
    meta:
      id: uts_b5f18c8fb3674ebbabb87351326eba1a
      created: 1746184272082
      modified: 1746213000652
      sortKey: -1746184272082
    tests:
      - name: Returns 200
        meta:
          id: ut_b0039eec00a3463d99ef1a9265214ddb
          created: 1746184279092
          modified: 1746184313450
          sortKey: -1746184279092
        requestId: req_e16391b3f8cd42f68104b7f1f381f627
        code: |-
          const response1 = await insomnia.send();
          expect(response1.status).to.equal(200);
      - name: Returns 200
        meta:
          id: ut_87d8fabdbc59487c92a44a64003437fc
          created: 1746184298135
          modified: 1746184333913
          sortKey: -1746184298135
        requestId: req_bfbdda0dfe0a4cfe93e1304881b192cf
        code: |-
          const response1 = await insomnia.send();
          expect(response1.status).to.equal(200);
